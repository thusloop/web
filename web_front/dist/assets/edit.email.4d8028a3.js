import{_ as e,a}from"./index.928a52d1.js";import{_ as l}from"./index.91cea44f.js";import{k as t,X as r,Y as s,R as o,r as u,o as i,z as m,U as f,q as n,D as d,E as p,a1 as c,P as v,j as g}from"./index.f499658f.js";import{E as b,a as _}from"./el-col.95c3f7f5.js";import{E as h,a as j}from"./el-form-item.a6d1fff0.js";import{E as x}from"./el-input.85ce3725.js";import{E as y}from"./el-button.994f3911.js";/* empty css                */import{a as E}from"./index.15d38df2.js";import{b as k}from"./route-block.7fdbc26a.js";import"./isEqual.0eac4f3f.js";import"./index.f964aaa5.js";const V=d(" 返回 "),q=d("取消"),z=d("提交"),C=t({name:"PersonalEditEmail"}),P=Object.assign(C,{setup(t){const k=r(),C=s(),{proxy:P}=g(),w=o(),R=u({email:"",captcha:""}),U=u({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",trigger:"blur",message:"请输入正确的邮箱格式"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"},{min:4,max:4,trigger:"blur",message:"验证码长度必须为4位"}]}),I=u(!1),D="{{time}}s后重新获取";let O=u(20);const S=u("发送验证码");function X(){O.value=20,S.value=D.replace("{{time}}",O.value);let e=setInterval((()=>{O.value--,O.value<=0?(S.value="发送验证码",clearInterval(e),I.value=!1):S.value=D.replace("{{time}}",O.value)}),1e3)}function Y(){P.$refs.formRef.validate((e=>{e&&w.editPassword(R.value).then((()=>{c({type:"success",message:"模拟修改成功，请重新登录"}),w.logout().then((()=>{C.push({name:"login",query:{redirect:k.fullPath}})}))})).catch((()=>{}))}))}function $(){C.push({name:"personalSetting"})}return(t,r)=>{const s=E,o=v,u=y,c=e,g=x,k=h,C=j,P=b,w=_,D=l,O=a;return i(),m("div",null,[f(c,{title:"修改邮箱",content:"绑定邮箱可以提高帐号安全性噢~"},{default:n((()=>[f(u,{size:"default",round:"",onClick:$},{icon:n((()=>[f(o,null,{default:n((()=>[f(s,{name:"ep:arrow-left"})])),_:1})])),default:n((()=>[V])),_:1})])),_:1}),f(D,null,{default:n((()=>[f(w,null,{default:n((()=>[f(P,{md:24,lg:12},{default:n((()=>[f(C,{ref:"formRef",model:R.value,rules:U.value,"label-width":"120px"},{default:n((()=>[f(k,{label:"邮箱",prop:"email"},{default:n((()=>[f(g,{modelValue:R.value.email,"onUpdate:modelValue":r[0]||(r[0]=e=>R.value.email=e),type:"text",placeholder:"请输入邮箱号"},null,8,["modelValue"])])),_:1}),f(k,{label:"验证码",prop:"captcha"},{default:n((()=>[f(g,{ref:"captcha",modelValue:R.value.captcha,"onUpdate:modelValue":r[1]||(r[1]=e=>R.value.captcha=e),type:"text",autocomplete:"on",placeholder:"请输入验证码"},{append:n((()=>[f(u,{disabled:I.value,onClick:X},{default:n((()=>[d(p(S.value),1)])),_:1},8,["disabled"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1}),f(O,null,{default:n((()=>[f(u,{size:"large",onClick:$},{default:n((()=>[q])),_:1}),f(u,{type:"primary",size:"large",onClick:Y},{default:n((()=>[z])),_:1})])),_:1})])}}});"function"==typeof k&&k(P);export{P as default};
